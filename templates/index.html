{% extends 'front_base.html' %}
{% load static %}
{% block content %}
    <div class="container-fluid" id="fh5co-image-grid">
        <div class="grid">
            <div class="grid-sizer"></div>
            <div class="grid-item item animate-box fadeIn animated-fast" data-animate-effect="fadeIn"
                 v-for="artworks in artworksList">
                <a href="{% url 'index' %}">
                    <div class="img-wrap">
                        <img :src="artworks.artwork_items[0].artwork_item_image" alt="" class="img-responsive">
                    </div>
                    <div class="text-wrap">
                        <div class="text-inner">
                            <div>
                                <h2>[[ artworks.product_title ]]</h2>
                                <span>[[ artworks.artwork_items.length ]] 筆資料</span>
                            </div>
                        </div>
                    </div>
                </a>
            </div>
        </div>
    </div>
{% endblock %}
{% block script %}
    <script type="application/javascript">
        const app = Vue.createApp({
            delimiters: ['[[', ']]'],
            data() {
                return {
                    artworksList: []
                }
            },
            created() {
                this.getArtworks()
            },
            methods: {
                getArtworks() {
                    axios.get('/api/artworks')
                        .then(response => {
                            this.artworksList = response.data
                            console.log(response.data)
                            console.log(this.artworksList[0].product_title)
                            console.log(this.artworksList[0].artwork_items[0].artwork_item_image)
                        })
                        .catch(error => {
                            console.log(error)
                        })
                },
            }
        })
        app.mount('#App')
    </script>
{% endblock %}